 

# 优点

降低资源消耗。可重复使用已创建的线程，降低线程创建和销毁造成的消耗。

提高响应速度。当任务到达时，任务不需要等待线程的创建就可立即执行。

提高线程的可管理性。线程是稀缺的资源，如果无限制创建，将会消耗系统资源，降低系统的稳定性。使用线程池统一可以统一的分配、调优和监控。

 

#  参数含义

- **corePoolSize** **:**     核心线程数线程数定义了最小可以同时运行的线程数量。在没有设置 allowCoreThreadTimeOut 为 true 的情况下，核心线程会在线程池中一直存活，即使处于闲置状态。
- **maximumPoolSize** **:**      线程池允许创建的最大线程数。如果队列满了，并且已创建的线程数小于最大线程数，则线程池会再创建新的线程执行任务。值得注意的是如果使用了无界的任务队列这个参数就没什么效果。
- **workQueue**: 当新任务来的时候会先判断当前运行的线程数量是否达到核心线程数，如果达到的话，信任就会被存放在队列中。
- **keepAliveTime**:当线程池中的线程数量大于 corePoolSize 的时候，如果这时没有新的任务提交，核心线程外的线程不会立即销毁，而是会等待，直到等待的时间超过了     keepAliveTime才会被回收销毁；

- **unit** : keepAliveTime 参数的时间单位。
- **threadFactory** : 用于设置创建线程的工厂，可以给创建的线程设置有意义的名字，可方便排查问题。
- **handler** :饱和策略。关于饱和策略下面单独介绍一下。

# 四种拒绝策略

- AbortPolicy(抛出一个异常，默认的)
- DiscardPolicy(直接丢弃任务)
- DiscardOldestPolicy（丢弃队列里最老的任务，将当前这个任务继续提交给线程池）
- CallerRunsPolicy（交给线程池调用所在的线程进行处理)

## 线程池工作原则

- 1、当线程池中线程数量小于 corePoolSize 则创建线程，并处理请求。
- 2、当线程池中线程数量大于等于 corePoolSize 时，则把请求放入 workQueue 中,随着线程池中的核心线程们不断执行任务，只要线程池中有空闲的核心线程，线程池就从 workQueue 中取任务并处理。
- 3 、当 workQueue 已存满，放不下新任务时则新建非核心线程入池，并处理请求直到线程数目达到 maximumPoolSize（最大线程数量设置值）。
- 4、如果线程池中线程数大于 maximumPoolSize 则使用 RejectedExecutionHandler 来进行任务拒绝处理。

# 常用线程池

- newFixedThreadPool     (固定数目线程的线程池)

FixedThreadPool 适用于处理CPU密集型的任务，确保CPU在长期被工作线程使用的情况下，尽可能的少的分配线程，即适用执行长期的任务。

- newCachedThreadPool(可缓存线程的线程池)

用于并发执行大量短期的小任务。

- newSingleThreadExecutor(单线程的线程池)

适用于串行执行任务的场景，一个任务一个任务地执行。

- newScheduledThreadPool(定时及周期执行的线程池)     

周期性执行任务的场景，需要限制线程数量的场景